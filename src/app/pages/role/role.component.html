<div class="surface-ground p-2">
    <!--Ce composant affiche le loader-->
    <app-loading [(isLoading)]="isLoading"/>
    <div class="p-4">
        <!--Au click on affiche le formulaire-->
        <p-button (click)="showFormulaire.set(true)" label="Ajouter" severity="success" />
    </div>
    <!--
        Composant table voir primeNG: https://primeng.org/table 
    -->
    <p-table 
    [value]="roles()" 
    styleClass="p-datatable-striped" 
    [paginator]="true"
    [rows]="5"
    [rowsPerPageOptions]="[5, 10, 20]">
        <ng-template pTemplate="header">
            <tr>
                <th>Nom</th>
                <th>Description</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-role>
            <tr>
                <td>{{role.nom}}</td>
                <td>{{role.description}}</td>
                <td class="flex flex-wrap gap-2">
                    <!--Bouttons d'action voir role.component.ts pour les fonctions -->
                    <p-button (click)="update(role)" icon="pi pi-pen-to-square" [rounded]="true" severity="info" />
                    <p-button (click)="deleteRole(role)" icon="pi pi-trash" [rounded]="true" severity="danger" />
                </td>
            </tr>
        </ng-template>
    </p-table>
    <!--
        Composant dialog pour l'affichage de fenÃªtre modale voir primeng: https://primeng.org/dialog
    -->
    <p-dialog header="Role" [modal]="true" [(visible)]="showFormulaire" [closable]="false" [style]="{ width: '25rem' }">
        <!--Formulaire du role-->
        <form class="flex flex-column gap-4 p-4" [formGroup]="roleForm">
            <div>
                <p-floatLabel>
                    <input id="nom" type="text" pInputText formControlName="nom" />
                    <label for="nom">Nom</label>
                </p-floatLabel>
            </div>
            <div>
                <p-floatLabel>
                    <textarea 
                        formControlName="description"
                        id="float-input" 
                        rows="5" cols="20" 
                        pInputTextarea>
                    </textarea>
                    <label for="float-input">Description</label>
                </p-floatLabel>
            </div>
            <div class="flex flex-wrap justify-content-between px-4 py-2">
                <p-button [disabled]="roleForm.invalid" (click)="save()" label="Enregistrer" severity="success" />
                <p-button (click)="closeForm()" label="Annuler" severity="secondary" />
            </div>
        </form>
    </p-dialog>

</div>